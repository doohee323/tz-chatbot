# 슬라이드 01: 토픽 분리 전략

## 슬라이드 내용 (한 장)

**토픽 분리의 필요성**
• CoinTutor와 DrillQuiz: 서로 다른 지식·용도
• 한 컬렉션에 섞으면: 검색 시 무관한 문서 노출, 앱별 제어 어려움
• **토픽별 분리**: MinIO 경로, Qdrant 컬렉션, RAG Backend, Ingestion

**토픽별 분리 전략 (요약)**

| 항목 | CoinTutor | DrillQuiz |
|------|-----------|-----------|
| MinIO 경로 | `rag-docs/raw/cointutor/` | `rag-docs/raw/drillquiz/` |
| Qdrant 컬렉션 | `rag_docs_cointutor` | `rag_docs_drillquiz` |
| Ingestion | cointutor용 Job/CronJob | drillquiz용 Job/CronJob |
| RAG Backend | `rag-backend` (Deployment) | `rag-backend-drillquiz` (Deployment) |
| Dify 도구 URL | Backend Service URL | Backend Service URL |

**특징**
• **한 버킷(rag-docs)** 내에서 **경로만 분리**
• **컬렉션·Backend는 완전 분리**

---

## 발표 노트

토픽을 나누는 이유는 여러 앱(CoinTutor, DrillQuiz)이 각각 다른 지식 베이스를 가지고 있기 때문입니다. 예를 들어 CoinTutor는 암호화폐 강의 자료이고 DrillQuiz는 문제 풀이 자료인데, 이걸 한 컬렉션에 섞어서 보관하면 사용자가 검색할 때 엉뚱한 문서가 나올 수 있습니다. 또한 각 앱이 자기 지식만 쓰도록 제어하기도 어렵습니다.

따라서 저장소에서 권장하는 방식은 이렇습니다. MinIO는 rag-docs라는 공통 버킷을 쓰지만, 그 안에서 raw/cointutor와 raw/drillquiz로 경로를 나눕니다. Qdrant는 rag_docs_cointutor와 rag_docs_drillquiz 두 개의 컬렉션을 만들어서 벡터를 분리해서 저장합니다.

Ingestion Job과 CronJob도 토픽별로 다릅니다. CoinTutor용 Job은 MinIO의 cointutor 경로에서 문서를 읽고 rag_docs_cointutor 컬렉션에 넣고, DrillQuiz용 Job은 drillquiz 경로에서 읽고 rag_docs_drillquiz에 넣습니다.

RAG Backend도 토픽별로 Deployment를 나눕니다. rag-backend는 CoinTutor용이거나 기본값이고, rag-backend-drillquiz는 DrillQuiz 전용입니다. 각 Backend는 자기 컬렉션만 검색하도록 설정되어 있습니다.

마지막으로 Dify의 도구 URL도 각 앱별로 다른 RAG Backend를 가리킵니다. 그래서 사용자가 CoinTutor에서 채팅하면 CoinTutor 문서만 검색되고, DrillQuiz에서 채팅하면 DrillQuiz 문서만 검색됩니다.
