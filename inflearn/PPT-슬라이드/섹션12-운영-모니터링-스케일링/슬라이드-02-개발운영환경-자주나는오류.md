# 슬라이드 02: 개발·운영 환경·자주 나는 오류

## 슬라이드 내용 (한 장)

**개발·운영 환경 가이드**  
• **개발**: 로컬 SQLite, MinIO/Qdrant 로컬 또는 K8s 포트포워드, Dify 로컬 또는 스테이징. 디버깅·빠른 반복  
• **운영**: PostgreSQL(chat_admin), K8s 내 MinIO·Qdrant·Dify, Ingress·TLS, Secret·리소스 제한. 백업·모니터링·알림

**자주 나는 오류와 해결**  
• **ImagePullBackOff**: 이미지 이름·레지스트리·imagePullSecrets 확인  
• **CrashLoopBackOff**: describe pod·logs로 종료 이유 확인. 환경변수·Secret·DB 연결·디스크 권한 등  
• **502/503**: Service·Pod Ready, Ingress backend·타임아웃. 로그에서 upstream 오류 확인  
• **RAG 검색 안 됨**: Qdrant 컬렉션·Ingestion 완료 여부, Dify 도구 URL·API 키, Backend 로그  
• **채팅/JWT 오류**: CHAT_GATEWAY_JWT_SECRET 일치, system_id 등록·DB 연결

---

## 발표 노트

개발 환경에서는 로컬에서 빠르게 돌리기 위해 SQLite를 쓰고, MinIO나 Qdrant는 로컬에 띄우거나 K8s를 포트포워드해서 쓰고, Dify도 로컬이나 스테이징을 쓸 수 있습니다. 디버깅과 반복이 편해요. 운영 환경에서는 PostgreSQL의 chat_admin DB를 쓰고, MinIO·Qdrant·Dify는 K8s 안에 두고, Ingress와 TLS, Secret 관리, 리소스 제한을 하고, 백업과 모니터링·알림을 꼭 하시면 됩니다.

자주 나는 오류를 정리하면 이렇습니다. ImagePullBackOff는 이미지 이름이나 레지스트리 주소, imagePullSecrets가 맞는지 확인하세요. CrashLoopBackOff는 describe pod와 logs로 왜 종료되는지 보시고, 환경변수나 Secret, DB 연결, 디스크 권한 같은 걸 점검하세요. 502나 503은 Service와 Pod가 Ready인지, Ingress의 backend와 타임아웃이 맞는지 보고, 로그에서 upstream 오류 메시지를 확인하세요. RAG 검색이 안 되면 Qdrant에 컬렉션이 있고 Ingestion이 끝났는지, Dify 도구 URL과 API 키가 맞는지, RAG Backend 로그에 오류가 있는지 봅니다. 채팅이나 JWT 오류는 chat-gateway와 앱이 같은 CHAT_GATEWAY_JWT_SECRET을 쓰는지, system_id가 DB에 등록돼 있는지, DB 연결이 되는지 확인하시면 됩니다.
