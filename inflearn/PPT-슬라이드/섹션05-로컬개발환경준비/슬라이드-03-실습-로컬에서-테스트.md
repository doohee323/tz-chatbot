# 슬라이드 03: 실습 — 로컬에서 테스트

## 슬라이드 내용 (한 장)

**목표**: chat-gateway·chat-admin을 로컬에서 실행하고 JWT·채팅 페이지 동작 확인 (K8s 배포 없이)

**전제**: Python 3.11+, Dify 기동 시 DIFY_BASE_URL·DIFY_API_KEY, CHAT_GATEWAY_JWT_SECRET 설정

**chat-gateway**  
• `cd chat-gateway`, 가상환경·pip install 후 `./gateway.sh`  
• JWT 발급: `./scripts/gen-jwt.sh` 또는 `./scripts/gen-jwt.sh cointutor 999`  
• 브라우저: 출력된 URL (http://localhost:8088/chat?token=...) 로 채팅 페이지 확인

**chat-admin**  
• `cd chat-admin`, `./admin.sh`  
• 브라우저: http://localhost:8000/ — 회원가입·로그인 후 시스템 목록·채팅 조회  
• 채팅 페이지: gen-jwt.sh로 발급한 URL 또는 앱에서 발급한 토큰으로 /chat?token=...

**확인**: gateway 루트(/) 소개 페이지, JWT URL로 /chat 열림, admin 로그인·시스템 목록 보임. 실서비스는 K8s 배포(섹션 10).

---

## 발표 노트

이 실습은 Jenkins나 K8s 배포 없이, 로컬에서 chat-gateway와 chat-admin을 돌려 보면서 동작을 확인하는 것입니다. 전제는 Python 3.11 이상이 있고, Dify가 이미 떠 있다면 DIFY_BASE_URL과 DIFY_API_KEY를 설정해 두시고, 채팅 페이지용 JWT 서명을 위해 CHAT_GATEWAY_JWT_SECRET을 설정해 두는 것입니다.

chat-gateway는 chat-gateway 디렉터리로 가서 가상환경을 쓰시면 되고, pip install -r requirements.txt 한 뒤 ./gateway.sh로 서버를 띄웁니다. JWT는 scripts/gen-jwt.sh로 발급할 수 있고, 예를 들어 ./scripts/gen-jwt.sh cointutor 999这样 하시면 cointutor용 테스트 JWT가 나옵니다. 터미널에 출력된 URL, http://localhost:8088/chat?token=... 같은 걸 브라우저에서 열어 보시면 채팅 페이지가 뜹니다.

chat-admin은 chat-admin 디렉터리에서 ./admin.sh로 띄우시고, 브라우저에서 http://localhost:8000/ 으로 접속합니다. 회원가입이나 로그인을 하신 뒤 시스템 목록이랑 채팅 조회 메뉴가 보이는지 확인하시면 됩니다. 채팅 페이지를 열 때는 방금 gen-jwt.sh로 만든 URL을 쓰거나, 나중에 앱에서 발급한 토큰으로 /chat?token=... 을 열면 됩니다.

확인할 것은 gateway 루트에 소개 페이지가 보이는지, JWT URL로 /chat이 열리는지, admin에서 로그인하고 시스템 목록이 보이는지입니다. 이건 모두 로컬 동작 확인용이고, 실제 서비스는 섹션 10에서 다루는 대로 K8s에 배포해서 쓰시면 됩니다.
