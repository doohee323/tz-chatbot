# 10-1. 실습: DB 생성 및 앱 배포

## 목표

- PostgreSQL에 `chat_admin` DB를 생성하고, chat-admin·chat-gateway를 K8s에 배포합니다.

## 단계

### 1. DB 생성

- PostgreSQL Pod가 있는 네임스페이스(예: devops)에서 `chat_admin` DB 생성
- README의 “Database setup” 참고: chat-admin-secret-* 에서 비밀번호를 꺼내서 psql로 `CREATE DATABASE chat_admin;` 실행

### 2. Secret 준비

- chat-admin·chat-gateway용 Secret에 POSTGRES_*, DIFY_*, CHAT_GATEWAY_JWT_SECRET 등 설정
- 브랜치에 맞는 Secret 이름 사용 (예: chat-admin-secret-main)

### 3. 앱 배포

```bash
cd chat-admin && ./ci/k8s.sh
cd ../chat-gateway && ./ci/k8s.sh
```

- 또는 Jenkins에서 해당 브랜치 빌드·배포
- `kubectl get pods -n devops` 로 Pod가 Running인지 확인

### 4. Ingress 확인

- admin·gateway용 Ingress가 적용되어 있으면, 브라우저에서 해당 도메인으로 접속해 봅니다.

다음 실습(10-2)에서 관리 화면에서 시스템 등록·채팅 연동을 진행합니다.
